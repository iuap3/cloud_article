# 基于Docker技术容器云
作者:（云平台-基础平台服务[**gPaaS**]-容器云平台）**技术架构师**

## 一、前言
在互联网的浪潮中，企业互联网技术发生了巨大的变化，架构模式从巨型架构，单层架构，SOA架构到微服务、无服务架构；开发流程从瀑布式到敏捷开发、DevOps；部署方式从单一应用服务器到云端，从虚机到容器；基础设施从托管，自建到私有云，公有云，混合云；展示形态从pc端、移动端到多端化；从各类应用系统，部分公共平台到业务中台，数字化中台。今天将介绍基于Docker技术容器云。


## 二、云的定义
云就是资源的网络化，云资源就是将多个数据聚合在一起形成巨大的资源池。用户使用这些资源就像使用水电一样方便，从而以更低成本快速提升业务价值；同时将先进的云架构和领先云技术作为服务集成到平台中。
常见的交付对象：
* 服务器

* 存储空间

* 网络

* 软件及计算服务

* 运行环境

云能帮你做什么？

* 提供最优的计算资源和网络资源

* 快速创建所需的应用和服务

* 数据存储、备份和恢复

* 大数据分析和建模

## 三、云服务分类
IaaS（Infrastructure as a Service）基础设施即服务

PaaS（Platform as a Service）平台即服务

SaaS（Software as a Service）软件即服务

FaaS（Function as a Service）功能即服务

不同类型的云服务，提供的服务能力也不相同

![](/articles/201808/images/articles3/images3.1.png)

## 四、用友云PaaS基础平台
用友云PaaS基础平台，是基于容器技术的企业级应用容器平台，提供应用整个生命周期管理，实现应用之间互联互通。通过使用平台能为企业解决统一规范管理产品、提高资源利用率、降低IT成本、运维困难成本高、产品更新效率低、微服务实施困难、大数据环境复杂等日常中遇到的痛点；平台是基于目前市场领先的技术Kubernetes构建的，采用开源＋自研模式，最大程度保证开源核心不变，外围做扩展。
## 五、总体架构

![](/articles/201808/images/articles3/images3.2.png)

 PaaS基础平台提供多云的接入能力，可以对接阿里云，华为云，AWS等云厂商，同时支持VMWare、Openstack、Bare Metal等系统。在IaaS基础上提供容器支撑服务和安全机制。在容器支撑服务上提提供DevOps能力，AI能力，微服务架构能力，中间价服务能力，大数据分析能力。平台支持多种语言运行环境如（Java，Node.js，Golang，Python，静态网站，Dockerfile）。
## 六、架构预览

![](/articles/201808/images/articles3/images3.3.png)

PaaS基础平台位于IaaS和应用程序之间，打通上下游，链接应用与基础设施。

## 七、部署架构

![](/articles/201808/images/articles3/images3.4.png)

 PaaS基础平台提供公有云和私有云的产品形态，整体部署模式也是动态可变，根据业务需要提供不同的部署模式。

## 八、平台核心价值
以kubernetes为核心组件的PaaS平台，以应用为中心，整合EFK，Calico，NAS等附加组件，为客户提供一整套的企业级容器云平台；

◆致力于解决异构基础设施的管理复杂的问题和面向企业互联网的应用交付和运维平台基础能力问题

◆DevOps: 建设开发、构建、测试、运行流水线，实现编译、整合、打包、测试、发布的自动化。扫除与环境不一致问题，实现一次构建、随处运行；将DevOps理念在企业IT生产中的应用，降低产品研发迭代生产中的成本，提高研发效率

◆自动化运维：智能化的资源调动与分配，通过负载均衡，弹性伸缩，集中日志采集，监控告警，高可用等减轻运维负担

◆中间件服务：基于容器技术的中间件服务，开箱即用，像应用商店一样

◆微服务治理：一款支撑微服务架构应用全生命周期管理的平台，为开发者提供从开发到运维、运行的一系列开发套件和服务，包含RPC框架、配置中心、注册中心、服务链路追踪、服务限流、服务熔断、服务统计、服务评价等组件和服务。
## 九、核心竞争力
以应用为中心，打造以应用为中心的管理平台

◆PaaS 平台—已经在生产环境中落地，集群规模达到100个节点，容器数达到5k＋

◆Devops—整合开发、测试、运维各环节，从线下走到线上，提升产品交付效率

◆容器云—提供多数据中心、多租户、多环境、多资源池能力，可以根据需求随意定义

◆微服务—从服务定义、服务拆分、服务扩展、服务编排、服务运行形成完整的理论和实践

◆RPC框架—提供服务注册、发现、限流、熔断、链路追踪、鉴权、分布式事务一致性能力

◆自动化运维—支持服务间全链路追踪和服务内调用追踪，提供资源和运行纬度监控报警

◆弹性伸缩—支持水平和垂直，手工与自动；基于业务运行态动态调整。

◆提供不同场景化产品需求能力

◆支持多机房、多数据中心部署能力

## 十、结束语
PaaS基础平台（开发者中心）提供了资源管理、持续集成、持续交付、容器服务、弹性扩缩等应用基础服务，同时为应用的微服务架构落地提供完备的支撑，结合DevOps的理念，通过提供自动化运维、日志管理、中间件服务等功能，帮助开发及运维人员降低产品研发迭代过程中的负担。该平台服务经过2年多的快速发展，产品已具备PaaS平台基础支撑能力，为公司内部云战略提供基础保障，目前已有1132个应用，中间件实例180个，接入主机347台；同时为全友、海澜之家、泰尔重工等传统企业信息化建设和数字化转型提供平台支撑，成为广大传统企业数字化转型一把尖刀。
